<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ê°ì„± íë§ ë‹¤ì´ì–´ë¦¬</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gaegu:wght@300;400;700&family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #f3f4f6;
            --text-color: #1f2937;
            --primary-color: #a78bfa;
            --primary-text-color: #ffffff;
            --card-bg-color: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }
        
        /* ê°ì •ë³„ í…Œë§ˆ */
        .theme-happy { --primary-color: #facc15; --bg-color: #fffbeb; }
        .theme-sad { --primary-color: #60a5fa; --bg-color: #eff6ff; }
        .theme-stress { --primary-color: #f87171; --bg-color: #fff1f2; }
        .theme-tired { --primary-color: #4ade80; --bg-color: #f0fdf4; }

        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            transition: background-color 0.5s ease;
        }

        .heading-font { font-family: 'Gaegu', cursive; }
        .card {
            background-color: var(--card-bg-color);
            box-shadow: 0 4px 15px var(--shadow-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .card:hover { transform: translateY(-5px); }
        .btn-primary {
            background-color: var(--primary-color);
            color: var(--primary-text-color);
        }
        .btn-primary:hover { opacity: 0.9; }
        .text-primary { color: var(--primary-color); }
        .border-primary { border-color: var(--primary-color); }
        .ring-primary:focus { --tw-ring-color: var(--primary-color); }
        
        .emotion-btn {
            transition: all 0.3s ease;
        }
        .emotion-btn.selected {
            transform: scale(1.1);
            color: var(--primary-color);
            border-color: var(--primary-color);
        }
        .modal-bg { background-color: rgba(0, 0, 0, 0.5); backdrop-filter: blur(4px); }
    </style>
</head>
<body class="antialiased">

    <div id="app" class="min-h-screen p-4 sm:p-6 lg:p-8">
        <header class="text-center mb-8">
            <h1 class="text-4xl sm:text-5xl font-bold heading-font mb-2">
                <i class="fa-solid fa-cloud-sun text-primary"></i> ê°ì„± íë§ ë‹¤ì´ì–´ë¦¬
            </h1>
            <p class="text-gray-500">ì˜¤ëŠ˜ ë‹¹ì‹ ì˜ ë§ˆìŒì€ ì–´ë–¤ ìƒ‰ì¸ê°€ìš”?</p>
        </header>

        <!-- ê°ì • ì„ íƒ -->
        <section id="emotion-selector" class="mb-8 p-4 bg-white/50 rounded-xl shadow-sm">
            <h2 class="text-xl font-bold text-center mb-4">ì§€ê¸ˆ ì–´ë–¤ ê¸°ë¶„ì´ì‹ ê°€ìš”?</h2>
            <div class="flex justify-center items-center gap-2 sm:gap-4 flex-wrap">
                <button data-emotion="happy" class="emotion-btn flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-transparent">
                    <span class="text-4xl">ğŸ˜„</span> <span class="font-semibold">í–‰ë³µ</span>
                </button>
                <button data-emotion="sad" class="emotion-btn flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-transparent">
                    <span class="text-4xl">ğŸ˜¢</span> <span class="font-semibold">ìŠ¬í””</span>
                </button>
                <button data-emotion="stress" class="emotion-btn flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-transparent">
                    <span class="text-4xl">ğŸ˜ </span> <span class="font-semibold">ìŠ¤íŠ¸ë ˆìŠ¤</span>
                </button>
                <button data-emotion="tired" class="emotion-btn flex flex-col items-center gap-2 p-3 rounded-lg border-2 border-transparent">
                    <span class="text-4xl">ğŸ˜´</span> <span class="font-semibold">í”¼ë¡œ</span>
                </button>
            </div>
        </section>

        <!-- ì½˜í…ì¸  ì˜ì—­ (ì´ˆê¸° ìˆ¨ê¹€) -->
        <main id="content-area" class="hidden">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
                <!-- ìŒì•… & íë§ ì½˜í…ì¸  -->
                <div class="lg:col-span-2 space-y-8">
                    <!-- ìŒì•… ì¶”ì²œ -->
                    <section>
                        <h2 class="text-2xl font-bold heading-font mb-4 text-primary">
                            <i class="fas fa-music"></i> ë§ˆìŒì„ ìœ„í•œ í”Œë ˆì´ë¦¬ìŠ¤íŠ¸
                        </h2>
                        <div id="music-list" class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-4"></div>
                    </section>
                    
                    <!-- íë§ ì½˜í…ì¸  -->
                    <section>
                        <h2 class="text-2xl font-bold heading-font mb-4 text-primary">
                             <i class="fas fa-quote-left"></i> ì˜¤ëŠ˜ì˜ íë§ ë©”ì‹œì§€
                        </h2>
                        <div id="healing-content" class="card p-6 rounded-lg text-center"></div>
                    </section>
                </div>
                
                <!-- ê°ì • ê¸°ë¡ -->
                <div class="lg:col-span-1">
                    <section>
                        <h2 class="text-2xl font-bold heading-font mb-4 text-primary">
                            <i class="fas fa-pencil-alt"></i> ì˜¤ëŠ˜ì˜ ê°ì • ê¸°ë¡í•˜ê¸°
                        </h2>
                        <div class="card p-6 rounded-lg">
                            <textarea id="diary-input" rows="4" class="w-full p-2 border border-gray-200 rounded-md focus:outline-none focus:ring-2 ring-primary" placeholder="ì˜¤ëŠ˜ì˜ ê°ì •ì„ ììœ ë¡­ê²Œ ì ì–´ë³´ì„¸ìš”..."></textarea>
                            <button id="save-diary" class="btn-primary w-full py-2 mt-4 rounded-md font-semibold transition">ê¸°ë¡ ì €ì¥í•˜ê¸°</button>
                        </div>
                        <div class="mt-6">
                            <h3 class="font-bold mb-2">ë‚˜ì˜ ê°ì • ê¸°ë¡ë“¤</h3>
                            <div id="diary-list" class="space-y-2"></div>
                        </div>
                    </section>
                </div>
            </div>
        </main>
    </div>

    <!-- ìŒì•… ì¬ìƒ ëª¨ë‹¬ -->
    <div id="modal" class="fixed inset-0 z-50 flex items-center justify-center p-4 modal-bg hidden">
        <div class="bg-white rounded-lg shadow-xl w-full max-w-lg relative overflow-hidden">
            <button id="close-modal" class="absolute top-3 right-3 text-gray-400 hover:text-gray-800 transition-colors z-10">
                <i class="fas fa-times fa-lg"></i>
            </button>
            <div id="player-container" class="aspect-video bg-black"></div>
            <div class="p-6">
                <h2 id="modal-title" class="text-2xl font-bold"></h2>
                <p id="modal-artist" class="text-gray-600 text-lg"></p>
            </div>
        </div>
    </div>
    
    <script>
    document.addEventListener('DOMContentLoaded', () => {
        const mockData = {
            music: [
                // happy
                { id: 1, title: "After LIKE", artist: "IVE (ì•„ì´ë¸Œ)", youtubeId: "F0B7HDiY-10", emotion: "happy" },
                { id: 2, title: "Hype Boy", artist: "NewJeans", youtubeId: "11cta61wi0g", emotion: "happy" },
                { id: 3, title: "Perfect Night", artist: "LE SSERAFIM (ë¥´ì„¸ë¼í•Œ)", youtubeId: "hLvWy2b857I", emotion: "happy" },
                { id: 4, title: "Magnetic", artist: "ILLIT (ì•„ì¼ë¦¿)", youtubeId: "Vk5-c_v4gMU", emotion: "happy"},
                
                // sad
                { id: 5, title: "Ditto", artist: "NewJeans", youtubeId: "pSUydWEqKwE", emotion: "sad" },
                { id: 6, title: "Either Way", artist: "IVE (ì•„ì´ë¸Œ)", youtubeId: "NF0M-S35dBE", emotion: "sad" },
                { id: 7, title: "í™”(ç«èŠ±)", artist: "(G)I-DLE (ì—¬ì)ì•„ì´ë“¤", youtubeId: "z3szNvgQxHo", emotion: "sad" },
                { id: 8, title: "Feel Special", artist: "TWICE (íŠ¸ì™€ì´ìŠ¤)", youtubeId: "3ymwOvzhwHs", emotion: "sad"},
                
                // stress
                { id: 9, title: "Supernova", artist: "aespa (ì—ìŠ¤íŒŒ)", youtubeId: "phuiiNCxRMg", emotion: "stress" },
                { id: 10, title: "ANTIFRAGILE", artist: "LE SSERAFIM (ë¥´ì„¸ë¼í•Œ)", youtubeId: "pyf8cbqyfPs", emotion: "stress" },
                { id: 11, title: "Super Lady", artist: "(G)I-DLE (ì—¬ì)ì•„ì´ë“¤", youtubeId: "60O_frN12_A", emotion: "stress"},
                { id: 12, title: "Midas Touch", artist: "KISS OF LIFE", youtubeId: "o_nfdzM_0KE", emotion: "stress"},

                // tired
                { id: 13, title: "Life's Too Short", artist: "aespa (ì—ìŠ¤íŒŒ)", youtubeId: "z2b2E_O9g_A", emotion: "tired" },
                { id: 14, title: "Psycho", artist: "Red Velvet (ë ˆë“œë²¨ë²³)", youtubeId: "uR8Mrt1IpXg", emotion: "tired" },
                { id: 15, title: "Swan Song", artist: "LE SSERAFIM (ë¥´ì„¸ë¼í•Œ)", youtubeId: "4OC_42yH82w", emotion: "tired" },
                { id: 16, title: "Closer", artist: "ì˜¤ë§ˆì´ê±¸ (OH MY GIRL)", youtubeId: "isUudT58Xfk", emotion: "tired"}
            ],
            healing: {
                happy: [
                    { type: 'quote', text: 'ê°€ì¥ í° í–‰ë³µì€ ë°”ë¡œ ì˜¤ëŠ˜, ì´ ìˆœê°„ì— ìˆë‹¤.', author: 'ì›”íŠ¸ íœ˜íŠ¸ë¨¼' },
                    { type: 'poem', text: 'ìì„¸íˆ ë³´ì•„ì•¼ ì˜ˆì˜ë‹¤. ì˜¤ë˜ ë³´ì•„ì•¼ ì‚¬ë‘ìŠ¤ëŸ½ë‹¤. ë„ˆë„ ê·¸ë ‡ë‹¤.', author: 'ë‚˜íƒœì£¼, í’€ê½ƒ' }
                ],
                sad: [
                    { type: 'quote', text: 'ëˆˆë¬¼ì´ ë‚˜ëŠ” ê±´ ë§ˆìŒì´ ì‚´ì•„ìˆë‹¤ëŠ” ì¦ê±°ì•¼. ê´œì°®ì•„, ìš¸ì–´ë„ ë¼.', author: 'ëˆ„êµ°ê°€ì˜ ìœ„ë¡œ' },
                    { type: 'poem', text: 'ìš¸ì§€ ë§ˆë¼. ì™¸ë¡œìš°ë‹ˆê¹Œ ì‚¬ëŒì´ë‹¤. ì‚´ì•„ê°„ë‹¤ëŠ” ê²ƒì€ ì™¸ë¡œì›€ì„ ê²¬ë””ëŠ” ì¼ì´ë‹¤.', author: 'ì •í˜¸ìŠ¹, ìˆ˜ì„ í™”ì—ê²Œ' }
                ],
                stress: [
                    { type: 'quote', text: 'ë„ˆë¬´ ì• ì“°ì§€ë§ˆ. ì ì‹œ ìˆ¨ì„ ê³ ë¥´ëŠ” ì‹œê°„ë„ í•„ìš”í•´.', author: 'ë§ˆìŒì˜ ì†Œë¦¬' },
                    { type: 'poem', text: 'ê´œì°®ì•„, ë‹¤ ê´œì°®ì•„. ê·¸ëƒ¥ í˜ëŸ¬ê°€ëŠ” ëŒ€ë¡œ, ë°”ëŒ ë¶€ëŠ” ëŒ€ë¡œ.', author: 'ì–´ëŠ ì¢‹ì€ ë‚ ' }
                ],
                tired: [
                    { type: 'quote', text: 'ì˜¤ëŠ˜ í•˜ë£¨ë„ ì •ë§ ìˆ˜ê³  ë§ì•˜ì–´. ë„ˆëŠ” ì¶©ë¶„íˆ ì˜í•˜ê³  ìˆì–´.', author: 'ë”°ëœ»í•œ ì‘ì›' },
                    { type: 'poem', text: 'ì‰¬ì–´ê°€ë„ ê´œì°®ì•„. ì•„ë¬´ë„ ë„ˆë¥¼ ì¬ì´‰í•˜ì§€ ì•Šì•„.', author: 'ì‰¼í‘œ' }
                ]
            }
        };

        const body = document.body;
        const emotionSelector = document.getElementById('emotion-selector');
        const contentArea = document.getElementById('content-area');
        const musicList = document.getElementById('music-list');
        const healingContent = document.getElementById('healing-content');
        const diaryInput = document.getElementById('diary-input');
        const saveDiaryBtn = document.getElementById('save-diary');
        const diaryList = document.getElementById('diary-list');
        
        const modal = document.getElementById('modal');
        const closeModalBtn = document.getElementById('close-modal');

        let diaryEntries = JSON.parse(localStorage.getItem('emotion-diary')) || [];

        const saveDiary = () => {
            localStorage.setItem('emotion-diary', JSON.stringify(diaryEntries));
        };

        const renderDiary = () => {
            diaryList.innerHTML = '';
            if (diaryEntries.length === 0) {
                diaryList.innerHTML = `<p class="text-gray-400 text-sm text-center">ì•„ì§ ê¸°ë¡ì´ ì—†ì–´ìš”.</p>`;
                return;
            }
            // ìµœì‹  ê¸€ì´ ìœ„ë¡œ ì˜¤ë„ë¡
            const reversedEntries = [...diaryEntries].reverse();
            reversedEntries.forEach(entry => {
                const entryEl = document.createElement('div');
                entryEl.className = 'bg-white/60 p-3 rounded-md text-sm';
                entryEl.innerHTML = `
                    <p class="font-semibold text-gray-700">${new Date(entry.date).toLocaleDateString('ko-KR')}</p>
                    <p class="text-gray-600">${entry.text}</p>
                `;
                diaryList.appendChild(entryEl);
            });
        };

        const selectEmotion = (emotion) => {
            // í…Œë§ˆ ë³€ê²½
            body.className = `theme-${emotion}`;

            // ë²„íŠ¼ í™œì„±í™”
            document.querySelectorAll('.emotion-btn').forEach(btn => {
                btn.classList.toggle('selected', btn.dataset.emotion === emotion);
            });
            
            // ì½˜í…ì¸  ë Œë”ë§
            renderMusic(emotion);
            renderHealingContent(emotion);
            
            // ì½˜í…ì¸  ì˜ì—­ ë³´ì´ê¸°
            contentArea.classList.remove('hidden');
        };

        const renderMusic = (emotion) => {
            musicList.innerHTML = '';
            const filteredMusic = mockData.music.filter(m => m.emotion === emotion);
            filteredMusic.forEach(music => {
                const musicCard = document.createElement('div');
                musicCard.className = 'card rounded-lg overflow-hidden cursor-pointer';
                musicCard.dataset.id = music.id;
                musicCard.innerHTML = `
                    <img src="https://i.ytimg.com/vi/${music.youtubeId}/mqdefault.jpg" class="w-full h-24 object-cover">
                    <div class="p-2">
                        <h4 class="font-bold text-sm truncate">${music.title}</h4>
                        <p class="text-xs text-gray-500 truncate">${music.artist}</p>
                    </div>
                `;
                musicList.appendChild(musicCard);
            });
        };
        
        const renderHealingContent = (emotion) => {
            const contents = mockData.healing[emotion];
            const content = contents[Math.floor(Math.random() * contents.length)];
            healingContent.innerHTML = `
                <p class="text-lg italic">"${content.text}"</p>
                <p class="mt-4 text-gray-500">- ${content.author} -</p>
            `;
        };

        const openModal = (music) => {
            document.getElementById('modal-title').textContent = music.title;
            document.getElementById('modal-artist').textContent = music.artist;
            document.getElementById('player-container').innerHTML = `<iframe class="w-full h-full" src="https://www.youtube.com/embed/${music.youtubeId}?autoplay=1" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>`;
            modal.classList.remove('hidden');
        };

        const closeModal = () => {
            modal.classList.add('hidden');
            document.getElementById('player-container').innerHTML = '';
        };

        // Event Listeners
        emotionSelector.addEventListener('click', (e) => {
            const button = e.target.closest('.emotion-btn');
            if (button) {
                selectEmotion(button.dataset.emotion);
            }
        });

        saveDiaryBtn.addEventListener('click', () => {
            const text = diaryInput.value.trim();
            if (text) {
                diaryEntries.push({ text, date: new Date() });
                saveDiary();
                renderDiary();
                diaryInput.value = '';
            }
        });

        musicList.addEventListener('click', (e) => {
            const card = e.target.closest('.card');
            if (card) {
                const music = mockData.music.find(m => m.id == card.dataset.id);
                if(music) openModal(music);
            }
        });

        closeModalBtn.addEventListener('click', closeModal);
        modal.addEventListener('click', (e) => {
            if (e.target === modal) closeModal();
        });

        // Initial render
        renderDiary();
    });
    </script>
</body>
</html>